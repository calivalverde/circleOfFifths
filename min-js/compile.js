"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function listOfKeys(){var e=Object.keys(allKeys),t=e.slice(9).concat(e.slice(0,9)),n=document.createElement("ul");n.setAttribute("class","circle-container"),t.forEach(function(e){var t=document.createElement("li"),a=document.createElement("button");a.setAttribute("value",e),a.setAttribute("class","button"),a.innerText=e,t.appendChild(a),n.appendChild(t)}),document.querySelector("#myList").appendChild(n)}function print(){document.querySelector("h2#key").innerHTML=newKey.name+" Major",document.querySelector("h3#scale").innerHTML="Scale: "+newKey.pitches,document.querySelector("#modes").innerHTML="<h4>Modes</h4> "+newKey.modes}function staff(){if(document.querySelector(".staff").classList.add("active"),svgPaths.forEach(function(e){e.setAttribute("class","inactive")}),0!=newKey.accidentals&&"♭"===newKey.accidentals[0][1])for(var e=0;e<svgPaths.length&&(svgPaths[e+7].setAttribute("class","active"),e!==newKey.accidentals.length-1);e++);else if(0!=newKey.accidentals&&"#"===newKey.accidentals[0][1])for(var t=0;t<svgPaths.length&&(svgPaths[t].setAttribute("class","active"),t!==newKey.accidentals.length-1);t++);}function init(){for(var e=document.querySelectorAll("ul.circle-container > li"),t=0;t<e.length;t++)!function(t){e[t].onclick=function(){!function(t){e.forEach(function(e){e.className="inactive"}),e[t].className="key",0==t?(e[t+1].className="dominant",e[e.length-1].className="subdominant"):t==e.length-1?(e[t-1].className="subdominant",e[0].className="dominant"):(e[t-1].className="subdominant",e[t+1].className="dominant")}(t)}}(t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),naturalNotes=["C","D","E","F","G","A","B"],modesList=["Ionian","Dorian","Phrygian","Lydian","Mixolydian","Aeolian","Locrian"],chordTypes=[{id:"I",type:"maj7",mode:"Ionian"},{id:"II",type:"m7",mode:"Dorian"},{id:"III",type:"m7",mode:"Phrygian"},{id:"IV",type:"maj7",mode:"Lydian"},{id:"V",type:"7",mode:"Mixolydian"},{id:"VI",type:"m7",mode:"Eolian"},{id:"VII",type:"m7(b5)",mode:"Locrian"}],orderSharps=["F","C","G","D","A","E"],orderFlats=["B","E","A","D","G","C"],allKeys={Gb:-6,Db:-5,Ab:-4,Eb:-3,Bb:-2,F:-1,C:0,G:1,D:2,A:3,E:4,B:5},Key=function(){function e(t){_classCallCheck(this,e),this.name=t}return _createClass(e,[{key:"sharpsOrFlats",get:function(){return allKeys[this.name]<0?Math.abs(allKeys[this.name])+"♭":0===allKeys[this.name]?"no flats or sharps.":allKeys[this.name]+"♯"}},{key:"accidentals",get:function(){var e=void 0;if(allKeys[this.name]<0){e=orderFlats.slice(0,Math.abs(allKeys[this.name])).map(function(e){return e+"♭"})}else{e=orderSharps.slice(0,allKeys[this.name]).map(function(e){return e+"#"})}return e}},{key:"pitches",get:function(){var e=naturalNotes.indexOf(this.name[0]),t=naturalNotes.slice(e).concat(naturalNotes.slice(0,e)),n=this.accidentals;return t.map(function(e){for(var t=0;t<n.length;t++)if(e===n[t][0])return n[t];return e})}},{key:"chords",get:function(){var e={};this.pitches.map(function(t,n){e[chordTypes[n].id]=t.concat(chordTypes[n].type)});return e}},{key:"modes",get:function(){for(var e=[],t=this.pitches,n=0;n<t.length;n++)for(var a=0;a<modesList.length;a++)e.push(t[n]+" "+modesList[a]),t.shift();return e}}]),e}(),du=new Key("C"),sol=new Key("G"),re=new Key("D"),la=new Key("A"),sib=new Key("Bb"),reb=new Key("Db");listOfKeys();var buttons=document.querySelectorAll("ul.circle-container > li > button"),svgPaths=document.querySelectorAll(".staff svg > path"),newKey=void 0;buttons.forEach(function(e){e.onclick=function(){newKey=new Key(e.value),print(),staff()}}),window.onload=init;